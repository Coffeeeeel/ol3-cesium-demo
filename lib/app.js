var map=new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.BingMaps({key:"AhaJDO_bWhekq58C0nGLRkwJSMphRFDTYeccozENkqZTAAa1W0OgoaWmcgbPxatZ",imagerySet:"AerialWithLabels"})})],view:new ol.View({center:[0,0],zoom:2})}),dragdrop=new ol.interaction.DragAndDrop({formatConstructors:[ol.format.GPX,ol.format.KML,ol.format.GeoJSON]});map.addInteraction(dragdrop);
dragdrop.on("addfeatures",function(a){a=new ol.source.Vector({features:a.features,projection:a.projection});map.getLayers().push(new ol.layer.Vector({source:a}));map.getView().fitExtent(a.getExtent(),map.getSize())});var ol3d=new olcs.OLCesium(map),scene=ol3d.getCesiumScene(),terrainProvider=new Cesium.CesiumTerrainProvider({url:"//cesiumjs.org/stk-terrain/tilesets/world/tiles"});scene.terrainProvider=terrainProvider;$("#zoom-world").click(function(){map.getView().setCenter([0,0]);map.getView().setZoom(2)});
$("#toggle-globe").click(function(){ol3d.setEnabled(!ol3d.getEnabled())});$("#clear-tracks").click(function(){for(var a=map.getLayers(),b=a.getLength();0<b;)a.item(--b)instanceof ol.layer.Vector&&a.pop()});